# 01_PRD: Medical-Grade Trading WebApp (Kiwoom REST Based)

## [핵심 결론]
- **목표**: 키움 REST API를 활용하여 16개(4x4) 실시간 차트를 지연 없이 렌더링하고, 로컬 미니 서버 환경에서 개인 자산 데이터를 안전하게 관리하는 고성능 트레이딩 대시보드 구축.
- **핵심 가치**: 데이터 주권(Local Hosting), 고밀도 정보 시각화(4x4 Grid), 낮은 시스템 부하.

---

## 1. [Search & Intelligence]
### 경쟁 서비스 및 기술 분석
| 구분 | TradingView (Web) | Kiwoom 영웅문 (HTS) | **본 프로젝트 (Local WebApp)** |
| :--- | :--- | :--- | :--- |
| **데이터 소스** | 자체 유료 데이터 | 키움 전용 프로토콜 | **키움 REST API (무료)** |
| **그리드 자유도** | 매우 높음 (유료플랜) | 높음 (복잡한 UI) | **4x4 고정/최적화 (Vue.js)** |
| **보안성** | 클라우드 저장 | 로컬 저장 | **완전 폐쇄형 로컬 서버** |
| **확장성** | PineScript 제한적 | 확장 불가능 | **Python 기반 알고리즘 확장 가능** |

### 기술적 분석
- **데이터 처리**: 키움 API의 초당 5회 제한을 회피하기 위해 백엔드(Python)에서 데이터 캐싱 및 WebSocket Broadcast 구조 채택 필수.
- **UX**: 16개 차트 동시 렌더링 시 브라우저 메모리 부하 급증. Lightweight 차트 라이브러리(예: Lightweight Charts) 또는 Canvas 기반 렌더링 권장.

---

## 2. [Drafting: Trading App Standard]

### 사용자 스토리
1. **개인 투자자로서**, 나는 외부 서버에 내 계좌 정보가 노출되지 않도록 **로컬 미니 서버**에서만 작동하는 앱을 원함.
2. **전업 트레이더로서**, 나는 여러 종목의 추세를 한눈에 파악하기 위해 **4x4 그리드 뷰**를 끊김 없이 보고 싶음.
3. **개발자로서**, 나는 키움 REST API의 **조회 제한(Rate Limit)**에 걸리지 않고 안정적으로 실시간 체결가를 수신하고 싶음.

### 주요 기능 요구사항 (Functional)
- **F-01: 4x4 다중 차트 레이아웃**: Vue.js Grid Layout을 활용한 16분할 화면 구성.
- **F-02: 키움 API 연동**: Python 백엔드를 통한 인증, 시세 조회, 주문 기능 연동.
- **F-03: 실시간 데이터 스트리밍**: WebSocket을 통해 백엔드에서 프론트엔드로 체결가 전송.
- **F-04: 종목 관리**: 4x4 그리드에 들어갈 종목(최대 16개 이상 관리) 및 관심종목 설정.

### 비기능 요구사항 (Non-functional)
- **NF-01: 보안**: 모든 민감 정보(App Key, Secret)는 `.env` 또는 암호화된 로컬 DB에 저장.
- **NF-02: 성능**: 16개 차트 가동 시 CPU 점유율 20% 미만 유지 (미니 서버 사양 기준).
- **NF-03: 가용성**: 미니 서버 재부팅 시 자동으로 백엔드 서비스 재시작.

---

## 3. [Adversarial Self-Review]
- **Q: 16개 차트의 Canvas 렌더링이 미니 서버/브라우저 성능에 치명적인가?**
  - **A**: 일반적인 Chart.js보다는 가벼운 `Lightweight Charts` 또는 `vtk.js`급의 메모리 관리가 필요함. 특히 16개 WebSocket 세션이 아닌, 1개 세션에서 멀티플렉싱하여 데이터를 분산해야 함.
- **Q: 키움 API의 보안 리스크(계좌 비밀번호 등)는 어떻게 관리되는가?**
  - **A**: 의료법(PII) 수준의 엄격함을 적용하여, 메모리 내에만 평문 저장하고 디스크 저장 시 AES-256 암호화 적용 권고.

---

## 4. [자가 검토 (Self Review)]
- **지속 가능성**: 키움 API 정책 변경 시 대응이 가능하도록 API 추상화 계층(Adapter Pattern)을 백엔드에 설계함.
- **페인포인트**: HTS의 무거운 UI를 제거하고 트레이딩에 꼭 필요한 '시각화'에만 집중하여 유저의 인지 부하를 줄임.

---

## 5. [Verification]
- [x] 4x4 그리드 레이아웃 명시 완료
- [x] 키움 REST API 제한 사항 반영 완료
- [x] 보안 및 로컬 서버 환경 정의 완료
